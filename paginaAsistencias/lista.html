<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Listado de Presentes y Ausentes 6° 7°</title>
    <link rel="stylesheet" href="css/stylis2.css">
</head>
<body>
    <div>
        <img src="img/et_logo.png" height="150">
        <h2>Listado de Alumnos</h2>
        <table id="listado" border="1">
            <thead>
                <tr>
                    <th>Nombre</th>
                    <th>Apellido</th>
                    <th>Asistencia</th>
                </tr>
            </thead>
            <tbody>

            </tbody>
        </table>
        <button onclick="window.location.href='tomarlista.html'">Volver al inicio</button>
    </div>
    

    <script>
        document.addEventListener("DOMContentLoaded", function() {
        fetch("alumnos.json")
        .then(response => response.json())
        .then(data => {
        const estadoCeldas = JSON.parse(localStorage.getItem("estadoCeldas")) || [];
        const tabla = document.getElementById("listado").getElementsByTagName("tbody")[0];

        let alumnoIndex = 0;

        for (let filaIndex = 0; filaIndex < estadoCeldas.length; filaIndex++) {
            for (let colIndex = 0; colIndex < estadoCeldas[filaIndex].length; colIndex++) {
                let estado = estadoCeldas[filaIndex][colIndex];

                if (estado !== null && alumnoIndex < data.length) {
                    let fila = document.createElement("tr");

                    let celdaNombre = document.createElement("td");
                    celdaNombre.textContent = data[alumnoIndex].Nombre;
                    fila.appendChild(celdaNombre);

                    let celdaApellido = document.createElement("td");
                    celdaApellido.textContent = data[alumnoIndex].Apellido;
                    fila.appendChild(celdaApellido);

                    let celdaEstado = document.createElement("td");
                    celdaEstado.textContent = estado;
                    fila.appendChild(celdaEstado);

                    tabla.appendChild(fila);
                    alumnoIndex++;
                }
            }
        }
        })
        .catch(error => console.error("Error al cargar el JSON:", error));

        });    
    </script>
</body>
</html>
